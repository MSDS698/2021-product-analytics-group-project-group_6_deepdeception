{% include 'header.html'%}

<h1>
	<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-W3KMFRQR5M"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());
	
		  gtag('config', 'G-W3KMFRQR5M');
		</script>
		<title>Prediction Page</title>
	Predict your statement
	</h1>
	
	<div class="container" onclick="gtag('event','click',{'event_category':'predict_button','event_label':'predict',value:10})">
		<form method="POST">
			{{ form.csrf_token }}
			{{ form.statement.label}} {{form.statement()}} <br/>
			{{ form.submit()}}
	
		</form>
	</br>
	</div>

<head>
	<title>Google Charts Tutorial</title>
	<link href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-progressbar/0.9.0/bootstrap-progressbar.js' rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script type = "text/javascript" src = "https://www.gstatic.com/charts/loader.js">
	</script>
	<script type = "text/javascript">
	   google.charts.load('current', {packages: ['corechart']});     
	</script>
</head>

<body>
	<br>
	<br>
	<br>

	{% include 'navbar.html'%}
	<br>
	<br>
	<br>
<!--progress bar-->
	{% if soft_preds is defined %}
	
     <h1  style="color:coral;"> {{veracity}}</h1>

    <h2 style="color:coral"> Model Confidence Analysis: </h2>

	<div class="progress">
        <!-- {% set prediction = "%.0f"| format(soft_preds[0].data|float*100)  %} -->
		<div class="progress-bar progress-bar-striped progress-bar-animated bg-danger" aria-valuenow="{{ '%.0f'| format(soft_preds[0].data|float*100)}}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: {{ '%.0f'| format(soft_preds[0].data|float*100) }}%;">
		{{ '%.0f'| format(soft_preds[0].data|float*100)}} % probability being false 
		</div>

		<div class="progress-bar progress-bar-striped progress-bar-animated bg-info" aria-valuenow="{{ '%.0f'| format(soft_preds[1].data|float*100)}}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: {{ '%.0f'| format(soft_preds[1].data|float*100) }}%;">
			{{ '%.0f'| format(soft_preds[1].data|float*100)}} % probability being true
			</div>	
	</div>
	{% endif %}

<!--google vizulization-->
	<div id = "container" style = "width: 800px; height: 800px; margin: 100px auto;">
	</div>
	<script language = "JavaScript">
	   function drawChart() {
		  // Define the chart to be drawn.
		  var word1  = '{{word1}}';
		  var proba1 = {{proba1}};
		  var word2  = '{{word2}}';
		  var proba2 = {{proba2}};
		  var word3  = '{{word3}}';
		  var proba3 = {{proba3}};
		  var word4  = '{{word4}}';
		  var proba4 = {{proba4}};
		  var word5  = '{{word5}}';
		  var proba5 = {{proba5}};
		  var word6  = '{{word6}}';
		  var proba6 = {{proba6}};

		  var data = google.visualization.arrayToDataTable([
			 ['Unigram', 'Percent'],
			 // ['blue', .1],
			 [word1,  proba1],
			 [word2,  proba2],
			 [word3,  proba3],
			 [word4,  proba4],
			 [word5,  proba5],
			 [word6,  proba6]
		  ]);

		  var options = {title: 'Top 3 Deceptive and Truthful Words'}; 

		  // Instantiate and draw the chart.
		  var chart = new google.visualization.BarChart(document.getElementById('container'));
		  chart.draw(data, options);
	   }
	   google.charts.setOnLoadCallback(drawChart);
	</script>
 </body>